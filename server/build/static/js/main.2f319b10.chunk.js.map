{"version":3,"sources":["components/Navbar.js","utils/getRequestId.js","services/fetch.js","components/CityMenu.js","components/EventMenu.js","components/TokenInput.js","components/BuyButton.js","services/login.js","components/LoginForm.js","components/Notification.js","components/EventInfo.js","App.js","index.js"],"names":["Navbar","setUser","setError","setMessage","user","setOpenErrorNotification","setOpenMessageNotification","AppBar","elevation","sx","backgroundColor","Toolbar","background","Typography","variant","noWrap","component","flexGrow","color","Button","position","fontWeight","size","onClick","window","localStorage","clear","location","reload","fetch","setToken","exception","setTimeout","handleLogout","getRequestId","inventoryId","extraId","strippedId","replace","encodedString","i","length","xorResult","charCodeAt","String","fromCharCode","btoa","substring","baseUrl","fetchEvents","city","axios","get","response","data","fetchEvent","id","fetchUser","bearer_token","headers","Authorization","console","error","fetchExtraId","fetchTicket","kideToken","productVariantMaximumReservableQuantity","options","method","body","json","post","newToken","CityMenu","setCity","setEvents","events","getEvents","model","Box","m","width","noValidate","autoComplete","TextField","select","label","value","onChange","event","target","borderColor","border","map","MenuItem","Object","values","EventMenu","setEvent","setEventInfo","className","margin","sort","a","b","timeUntilSalesStart","filter","productType","name","then","whiteSpace","pl","availability","Chip","TokenInput","token","useState","useEffect","fetchedUser","getItem","placeholder","setItem","mt","textAlign","fontSize","username","fullName","email","BuyButton","isLoopActive","setIsLoopActive","intervalId","setInterval","buyAllTickets","clearInterval","variants","product","fetchedEvent","fetchPromises","catch","status","message","Promise","all","mx","minWidth","minHeight","ToggleButton","boxSizing","login","credentials","Copyright","props","align","Link","href","Date","getFullYear","theme","createTheme","typography","allVariants","fontFamily","textTransform","h5","root","LoginForm","setUsername","password","setPassword","handleLogin","preventDefault","JSON","stringify","ThemeProvider","Container","maxWidth","display","flexDirection","justifyContent","alignItems","CssBaseline","marginTop","onSubmit","required","fullWidth","autoFocus","type","mb","Notification","openMessageNotification","openErrorNotification","handleErrorClose","reason","handleMessageClose","Stack","spacing","Snackbar","open","autoHideDuration","onClose","Alert","severity","EventInfo","date","dateActualFrom","Card","boxShadow","CardMedia","height","image","mediaFilename","alt","objectFit","CardContent","gap","padding","paddingBottom","gutterBottom","Divider","alignSelf","paddingTop","toLocaleString","place","streetAddress","company","maxHeight","pricePerItem","seconds","Number","d","Math","floor","h","s","timeUntilSales","CardActions","endIcon","App","eventInfo","setExtraId","loggedUserJSON","parse","initializeExtraId","fetchedExtraId","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.2f319b10.chunk.js","sourcesContent":["import AppBar from '@mui/material/AppBar';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport Typography from '@mui/material/Typography';\r\nimport Button from '@mui/material/Button';\r\nconst Navbar = ({setUser, setMessage, setError, user, setOpenMessageNotification, setOpenErrorNotification }) => {     \r\n    \r\n    const handleLogout = () => {\r\n        try {\r\n          window.localStorage.clear()\r\n          window.location.reload(true)\r\n          fetch.setToken('')\r\n          setUser('')\r\n        } catch (exception) {\r\n        setOpenErrorNotification(true)\r\n          setError('Logged out.')\r\n          setTimeout(() => {\r\n            setError(null)\r\n          }, 6000)\r\n        }\r\n      }\r\n      return (\r\n        <AppBar elevation={0} sx={{backgroundColor:'white'}}>\r\n            <Toolbar sx={{background: '#212121'}}>\r\n                <Typography  \r\n                    variant=\"h5\"\r\n                    noWrap\r\n                    component=\"div\"\r\n                    sx={{ flexGrow: 1, color: 'white' }}\r\n                >\r\n                    KIDESTONKS\r\n                </Typography>\r\n                {user === null ? \r\n                    null :\r\n                    <Button sx={{position: 'absolute', color: 'white', fontWeight: 700, \":hover\": {backgroundColor: '#2a0062', color: 'white'}}} size=\"small\" onClick={() => handleLogout()} variant=\r\n                    'text'>LOGOUT</Button>\r\n                }\r\n            </Toolbar>\r\n            \r\n        </AppBar>\r\n    )\r\n  }\r\n  export default Navbar","export function getRequestId(inventoryId, extraId) {\r\n\tconst strippedId = inventoryId.replace(/-/g, '');\r\n\r\n\tlet encodedString = '';\r\n\r\n\tfor (let i = 0; i < strippedId.length; i++) {\r\n\t\tconst xorResult = strippedId.charCodeAt(i) ^ extraId.charCodeAt(i);\r\n\t\tencodedString += String.fromCharCode(xorResult);\r\n\t}\r\n\r\n\treturn btoa(encodedString).substring(0, 8);\r\n}","import axios from 'axios';\r\nimport { getRequestId } from '../utils/getRequestId';\r\n\r\nconst baseUrl = 'https://api.kide.app/api'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `Bearer ${newToken}`\r\n}\r\n\r\nconst fetchEvents = async (city) => {\r\n    const response = await axios.get(`${baseUrl}/products?city=${city}`)\r\n    return response.data\r\n}\r\n\r\nconst fetchEvent = async (id) => {\r\n    const response = await axios.get(`${baseUrl}/products/${id}`)\r\n    return response.data\r\n}\r\n\r\nconst fetchUser = async (bearer_token) => {\r\n  try {\r\n    const response = await axios.get(`${baseUrl}/authentication/user`, {\r\n      headers: {\r\n        Authorization: `Bearer ${bearer_token}`\r\n      }\r\n    });\r\n    return response.data\r\n  } catch (error) {\r\n    console.error('Failed to fetch user information:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n\r\nconst fetchExtraId = async () => {\r\n  try {\r\n    const response = await axios.get('/api/extraid');\r\n    return response.data.extraId;\r\n  } catch (error) {\r\n    console.error('Failed to fetch extraId:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst fetchTicket = async (id, kideToken, productVariantMaximumReservableQuantity, extraId) => {\r\n  var data = {\r\n    \"expectCart\": true,\r\n    \"includeDeliveryMethods\": false,\r\n    \"toCreate\":[\r\n      {\r\n        \"inventoryId\": id,\r\n        \"quantity\": productVariantMaximumReservableQuantity,\r\n        \"productVariantUserForm\":null\r\n      }\r\n    ],\r\n    \"toCancel\": []\r\n  }\r\n\r\n  var options = {\r\n    method: 'POST',\r\n    body: data,\r\n    json: true,\r\n    headers: {\r\n        'Authorization': `Bearer ${kideToken}`,\r\n        'X-Requested-Token-C69': getRequestId(id, extraId),\r\n        \r\n      }\r\n  }\r\n  const response = await axios.post(`${baseUrl}/reservations`, data, options, {})\r\n  return response.data\r\n};\r\n\r\nexport default { fetchEvents, fetchEvent, fetchTicket, setToken, fetchExtraId, fetchUser }","import * as React from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport TextField from '@mui/material/TextField';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport fetch from '../services/fetch';\r\n\r\nconst CityMenu = ({ city, setCity, events, setEvents }) => {\r\n\r\n  const cities = ['Joensuu', 'Kuopio', 'Pori', 'Tampere', 'Helsinki']\r\n\r\n  const handleChange = (event) => {\r\n    setCity(event.target.value);\r\n  };\r\n  \r\n  const getEvents = async (city) => {\r\n      const response = await fetch.fetchEvents(city)\r\n      setEvents(response.model)\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      component=\"form\"\r\n      sx={{\r\n        '& .MuiTextField-root': { m: 0, width: '25ch' },\r\n      }}\r\n      noValidate\r\n      autoComplete=\"off\"\r\n    >\r\n      <div>\r\n        <TextField\r\n          id=\"outlined-select-currency\"\r\n          select\r\n          label=\"Kaupunki\"\r\n          color='secondary'\r\n          value={city}\r\n          onChange={handleChange}\r\n          sx={\r\n              {                        \r\n                '& .MuiOutlinedInput-root': {  \r\n                    color: \"darkgray\",\r\n                    '& fieldset': {           \r\n                        borderColor: '#2a0062',\r\n                        border: '2px solid #2a0062'   \r\n                    },\r\n                    '&:hover fieldset': {\r\n                        borderColor: '#2a0062',\r\n                        border: '3px solid #2a0062' \r\n                    },\r\n                    '&.Mui-focused fieldset': { \r\n                        borderColor: '#2a0062',\r\n                        border: '3px solid #2a0062' \r\n                    },\r\n                    \"&.Mui-focused\": {\r\n                      color: \"white\"\r\n                    },\r\n                    \"&.Mui-root\": {\r\n                      color: 'white'\r\n                    } \r\n                }\r\n              }\r\n            }\r\n        >\r\n          {cities.map((city) => (\r\n            <MenuItem key={city} value={city} onClick={() => getEvents(city)} >\r\n              {Object.values(city)}\r\n            </MenuItem>\r\n          ))}\r\n        </TextField>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default CityMenu","import * as React from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport TextField from '@mui/material/TextField';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport { useState } from 'react'\r\nimport fetch from '../services/fetch';\r\nimport Chip from \"@mui/material/Chip\";\r\nimport Divider from '@mui/material/Divider';\r\n\r\nconst EventMenu = ({ event, setEvent, setEventInfo, events }) => {\r\n\r\n  const handleChange = (event) => {\r\n    setEvent(event.target.value);\r\n  };\r\n\r\n  const getEventInfo = (id) => {\r\n    fetch.fetchEvent(id).then(event => {\r\n        setEventInfo(event.model)\r\n    }) \r\n  }\r\n\r\n  return (\r\n    <div className='event-menu'>\r\n      <Box\r\n        component=\"form\"\r\n        sx={{\r\n          '& .MuiTextField-root': { width: '25ch', margin: \"10px 0px 10px auto\" },\r\n        }}\r\n        noValidate\r\n        autoComplete=\"off\"\r\n      >\r\n        <div>\r\n          <TextField\r\n            id=\"outlined-select-currency\"\r\n            select\r\n            label=\"Tapahtuma\"\r\n            color='secondary'\r\n            value={event}\r\n            onChange={handleChange}\r\n            sx={\r\n              {                         \r\n                '& .MuiOutlinedInput-root': {  \r\n                  color: \"darkgray\",\r\n                  '& fieldset': {           \r\n                      borderColor: '#2a0062',\r\n                      border: '2px solid #2a0062'   \r\n                  },\r\n                  '&:hover fieldset': {\r\n                      borderColor: '#2a0062',\r\n                      border: '3px solid #2a0062' \r\n                  },\r\n                  '&.Mui-focused fieldset': { \r\n                      borderColor: '#2a0062',\r\n                      border: '3px solid #2a0062' \r\n                  },\r\n                  '&.MuiInputLabel-root': {\r\n                    color: 'white'\r\n                  },\r\n                  \"&.MuiFormLabel-root\": {\r\n                    color: 'white'\r\n                  } \r\n              },\r\n              } \r\n            }\r\n          >\r\n            {events\r\n              .sort((a, b) => b.timeUntilSalesStart - a.timeUntilSalesStart)\r\n              .filter(event => event.productType === 1)\r\n              .map((event) => (\r\n              <MenuItem key={event.id} \r\n              \r\n                        value={event.name} \r\n                        onClick={() => getEventInfo(event.id)}\r\n                        sx={{\r\n                            width: 500,\r\n                            whiteSpace: \"normal\",\r\n                            }}\r\n                        >\r\n                {event.name}\r\n                <Box sx={{margin: \"0px 0px 0px auto\", pl: 2}}>\r\n                  {event.availability !== 0 ?\r\n                    <Chip label={`${event.availability} %`} color=\"success\" variant=\"outlined\" />\r\n                    :\r\n                    <Chip label={`${event.availability} %`} color=\"error\" variant=\"outlined\" />\r\n                  }\r\n                  \r\n                </Box>\r\n              </MenuItem>\r\n            ))}\r\n          </TextField>\r\n        </div>\r\n      </Box>\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nexport default EventMenu","import * as React from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport TextField from '@mui/material/TextField';\r\nimport fetch from '../services/fetch';\r\nimport { useState, useEffect } from 'react'\r\n\r\nconst TokenInput = ({ token, setToken }) => {\r\n\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      fetchUser(token);\r\n    }\r\n  }, [token]);\r\n\r\n  const fetchUser = async (token) => {\r\n    const fetchedUser = await fetch.fetchUser(token);\r\n    setUser(fetchedUser);\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    setToken(event.target.value);\r\n    window.localStorage.setItem('kideToken', event.target.value);\r\n    if (event.target.value > 20) {\r\n      fetchUser(event.target.value);\r\n    }\r\n\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      component=\"form\"\r\n      sx={{\r\n        '& .MuiTextField-root': { width: '25ch', color: 'white' },     \r\n          '& .MuiOutlinedInput-root': {  \r\n              '& fieldset': {           \r\n                  borderColor: '#2a0062',   \r\n              },\r\n              '&:hover fieldset': {\r\n                  borderColor: '#2a0062',\r\n              },\r\n              '&.Mui-focused fieldset': { \r\n                  borderColor: '#2a0062',\r\n              },\r\n          },\r\n        } \r\n      }\r\n      noValidate\r\n      autoComplete=\"off\"\r\n    >\r\n      <div>\r\n        <TextField\r\n          value={localStorage.getItem('kideToken')}\r\n          id=\"outlined-helperText\"\r\n          placeholder='Syötä'\r\n          label=\"Token\"\r\n          color='secondary'\r\n          onChange={handleChange}\r\n          sx={{                         \r\n            '& .MuiOutlinedInput-root': {  \r\n              color: \"darkgray\" ,\r\n              '& fieldset': {           \r\n                  borderColor: '#2a0062',\r\n                  border: '2px solid #2a0062'\r\n              },\r\n              '&:hover fieldset': {\r\n                  borderColor: '#2a0062',\r\n                  border: '3px solid #2a0062' \r\n              },\r\n              '&.Mui-focused fieldset': { \r\n                  borderColor: '#2a0062',\r\n                  border: '3px solid #2a0062' \r\n              },\r\n              '&.MuiFormLabel-root-MuiInputLabel-root':{\r\n                color: 'white'\r\n              },\r\n              \"&.Mui-focused\": {\r\n                color: \"white\"\r\n              },\r\n              \"&.Mui-root\": {\r\n                color: 'white'\r\n              } \r\n\r\n          }\r\n          }}\r\n        />\r\n        {user && (\r\n          <Box sx={{ mt: 2, color: 'white', textAlign: 'left', fontSize: '.75rem' }}>\r\n            <div>User: {user.model.username}</div>\r\n            <div>Name: {user.model.fullName}</div>\r\n            <div>Email: {user.model.email}</div>\r\n          </Box>\r\n        )}\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default TokenInput\r\n","import * as React from 'react';\r\nimport Button from '@mui/lab/LoadingButton';\r\nimport { Box } from '@mui/material/';\r\nimport fetch from '../services/fetch';\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport ToggleButton from '@mui/material/ToggleButton';\r\n\r\nconst BuyButton = ({ event, token, setMessage, setError, setOpenErrorNotification, setOpenMessageNotification, setEventInfo, extraId }) => {\r\n\r\n  const [isLoopActive, setIsLoopActive] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let intervalId;\r\n    if (isLoopActive) {\r\n      intervalId = setInterval(() => {\r\n        buyAllTickets();\r\n      }, 1000);\r\n    }\r\n    return () => clearInterval(intervalId);\r\n  }, [isLoopActive]);\r\n\r\n  const buyAllTickets = async () => {\r\n    if (!token) {\r\n      setOpenErrorNotification(true);\r\n      setError('Token puuttuu.');\r\n      setTimeout(() => setError(''), 6000);\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      if (event.variants.length === 0) {\r\n        const fetchedEvent = await fetch.fetchEvent(event.product.id); // Ensure this operation is awaited\r\n        setEventInfo(fetchedEvent.model);\r\n        setOpenErrorNotification(true);\r\n        setError('Myynti ei ole vielä alkanut.');\r\n        setTimeout(() => setError(''), 6000);\r\n        return;\r\n      }\r\n  \r\n      const fetchPromises = event.variants.map(variant => \r\n        fetch.fetchTicket(variant.inventoryId, token, variant.productVariantMaximumReservableQuantity, extraId)\r\n          .then(response => {\r\n            setOpenMessageNotification(true);\r\n            setMessage(`Napattiin '${variant.name}' -lippu.`);\r\n            setTimeout(() => {\r\n              setMessage('');\r\n              setOpenMessageNotification(false);\r\n            }, 6000);\r\n          })\r\n          .catch(error => {\r\n            if (error.response && error.response.status === 401) {\r\n              setError('Token väärin tai puutteellinen. Annathan tokenin ilman Bearer -liitettä.');\r\n            } else if (error.response && error.response.status === 400) {\r\n              setError(`Lippua '${variant.name}' ei saatavilla.`);\r\n            } else {\r\n              setError(`Odottamaton virhe. ${error.message}`);\r\n            }\r\n            setOpenErrorNotification(true);\r\n            setTimeout(() => {\r\n              setError('');\r\n              setOpenErrorNotification(false);\r\n            }, 6000);\r\n          })\r\n      );\r\n  \r\n      await Promise.all(fetchPromises);\r\n  \r\n    } catch (error) {\r\n      setOpenErrorNotification(true);\r\n      setError(`Odottamaton virhe. ${error.message || error}`);\r\n      setTimeout(() => setError(''), 6000);\r\n    }\r\n  };\r\n\r\n\r\n  const handleLoopClick = () => {\r\n    setIsLoopActive(!isLoopActive);\r\n  }\r\n\r\n  const handleClick = () => {\r\n      buyAllTickets()\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <Box sx={{ '& > button': { mt: 3, mx: 3 } }}>\r\n        <Button\r\n          onClick={() => handleClick()}\r\n          variant=\"contained\"\r\n          size='medium'\r\n          sx={{color: \"white\", backgroundColor: '#2a0062', minWidth: '6rem', minHeight: '3rem', ':hover': {\r\n            background: '#2a0050'\r\n          }}}\r\n        >\r\n          VARAA\r\n        </Button>\r\n        <ToggleButton\r\n          value=\"check\"\r\n          size='medium'\r\n          \r\n          color='standard'\r\n          onClick={handleLoopClick} \r\n\r\n          sx={{minWidth: '6rem', minHeight: '2rem', color: 'white', border: '1x solid #2a0062', boxSizing: 'border-box',                      \r\n\r\n          }}\r\n        \r\n        >\r\n        {isLoopActive ? 'STOP' : 'LOOP'}\r\n        </ToggleButton>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default BuyButton","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { login }","import * as React from 'react';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Button from '@mui/material/Button';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\nimport TextField from '@mui/material/TextField';\r\nimport Link from '@mui/material/Link';\r\nimport Box from '@mui/material/Box';\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport login from '../services/login'\r\nimport fetch from '../services/fetch';\r\n\r\nconst Copyright = (props) => {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" {...props}>\r\n      {'KideStonks is behind login to prevent mass abuse :D. Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://github.com/paakkis\">\r\n        paakkis\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst theme = createTheme({\r\n  typography: {\r\n    allVariants: {\r\n      fontFamily: 'Roboto Mono',\r\n      textTransform: 'none',\r\n      fontSize: 16,\r\n      \r\n    },\r\n    h5: {\r\n      color: 'white'\r\n    },\r\n  },\r\n  root: {\r\n    \"&. MuiFormLabel-root\": {\r\n      color: \"white\",\r\n      background: '#212121'\r\n    }\r\n  }\r\n});\r\n\r\nconst LoginForm = ({ setMessage, setError, setUser, setOpenMessageNotification, setOpenErrorNotification }) =>  {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n\r\n  const handleLogin = async event => {\r\n    event.preventDefault()\r\n    try {\r\n      const user = await login.login({\r\n        username, password,\r\n      })\r\n      window.localStorage.setItem('loggedStonkuser', JSON.stringify(user))\r\n      fetch.setToken(user.token)\r\n      setUser(user)\r\n      setUsername('')\r\n      setPassword('')\r\n      setOpenMessageNotification(true)\r\n      setMessage(`Logged in as ${user.name}`)\r\n      setTimeout(() => {\r\n        setOpenMessageNotification(false)\r\n        setMessage(null)\r\n      }, 6000)\r\n    } catch (exception) {\r\n      setOpenErrorNotification(true)\r\n      setError('Wrong username or password.')\r\n      setTimeout(() => {\r\n        setOpenErrorNotification(false)\r\n        setError(null)\r\n      }, 6000)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Container component=\"main\" maxWidth=\"xs\" sx={{display: 'flex', flexDirection: 'column', justifyContent: 'center', margin: 'auto !important', alignItems: 'center'}}>\r\n        <CssBaseline />\r\n        <Box\r\n          sx={{\r\n            marginTop: 8,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n          }}\r\n        >\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <Box component=\"form\" onSubmit={handleLogin} noValidate sx={{ mt: 1 }}>\r\n            <TextField\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"username\"\r\n              label=\"Username\"\r\n              name=\"username\"\r\n              autoComplete=\"username\"\r\n              autoFocus\r\n              value={username}\r\n              onChange={({ target }) => setUsername(target.value)}\r\n            />\r\n            <TextField\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              value={password}\r\n              onChange={({ target }) => setPassword(target.value)}\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n            >\r\n              Sign In\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n        <Copyright sx={{ mt: 8, mb: 4 }} />\r\n      </Container>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default LoginForm","import * as React from 'react';\r\nimport Stack from '@mui/material/Stack';\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport Alert from '@mui/material/Alert';\r\n\r\nconst Notification = ({ message, error, openMessageNotification, openErrorNotification, setOpenMessageNotification, setOpenErrorNotification}) => {\r\n\r\n  const handleErrorClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpenErrorNotification(false);\r\n  };\r\n  const handleMessageClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpenMessageNotification(false);\r\n  };\r\n\r\n  return (\r\n    <Stack spacing={2} sx={{ width: '100%' }}>\r\n      <Snackbar open={openErrorNotification} autoHideDuration={6000} onClose={handleErrorClose}>\r\n        {(error &&\r\n            <Alert onClose={handleErrorClose} severity=\"error\" sx={{ width: '100%' }}>\r\n                {error}\r\n            </Alert>\r\n        )}\r\n      </Snackbar>\r\n      <Snackbar open={openMessageNotification} autoHideDuration={6000} onClose={handleMessageClose}>\r\n        {(message &&\r\n            <Alert onClose={handleMessageClose} severity=\"success\" sx={{ width: '100%' }}>\r\n                {message}\r\n            </Alert>\r\n        )}\r\n      </Snackbar>\r\n    </Stack>\r\n  );\r\n}\r\n\r\nexport default Notification","import * as React from 'react';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CardMedia from '@mui/material/CardMedia';\r\nimport Typography from '@mui/material/Typography';\r\nimport Chip from '@mui/material/Chip';\r\nimport { Button, CardActions, Divider } from '@mui/material';\r\nimport EventIcon from '@mui/icons-material/Event';\r\nimport Box from '@mui/material/Box';\r\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\r\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\r\n\r\nconst EventInfo = ({ event }) => {\r\n\r\n  function timeUntilSales(seconds) {\r\n      seconds = Number(seconds);\r\n      var d = Math.floor(seconds / (3600*24));\r\n      var h = Math.floor(seconds % (3600*24) / 3600);\r\n      var m = Math.floor(seconds % 3600 / 60);\r\n      var s = Math.floor(seconds % 60);\r\n      \r\n      var dDisplay = d > 0 ? d + (d === 1 ? \" päivä, \" : \" päivän, \") : \"\";\r\n      var hDisplay = h > 0 ? h + (h === 1 ? \" tunnin, \" : \" tunnin, \") : \"\";\r\n      var mDisplay = m > 0 ? m + (m === 1 ? \" minuutin, \" : \" minuutin, \") : \"\";\r\n      var sDisplay = s > 0 ? s + (s === 1 ? \" sekunnin\" : \" sekunnin\") : \"\";\r\n      return dDisplay + hDisplay + mDisplay + sDisplay;\r\n  }\r\n    \r\n  var date = new Date(event.product.dateActualFrom)\r\n\r\n  return (\r\n      <Card sx={{ maxWidth: 400, margin: 'auto', marginTop: '20px', background: '#262828', boxShadow: 'rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px'}}>\r\n          <CardMedia \r\n            component=\"img\"\r\n            height=\"140\"\r\n            image={`https://portalvhdsp62n0yt356llm.blob.core.windows.net/bailataan-mediaitems/${event.product.mediaFilename}`}\r\n            alt=\"Tapahtuman kuva\"\r\n            sx={{objectFit: 'fill'}}\r\n          />\r\n          <CardContent sx={{textAlign: 'left', display: 'flex', flexDirection: 'column', gap: '.5rem', padding: 3, paddingBottom: 0}}>\r\n            <Typography gutterBottom variant=\"h2\" component=\"div\" sx={{color: '#efefef', textAlign: 'center'}}>\r\n              {event.product.name}\r\n            </Typography>\r\n            <Divider sx={{border: '2px solid #2a0062', width: '100%', alignSelf: 'center'}}/>\r\n            <Typography component=\"div\" sx={{color: '#efefef', paddingTop: 2}}>\r\n              Aika: {date.toLocaleString()}\r\n            </Typography>\r\n            <Typography component=\"div\" sx={{color: '#efefef'}}>\r\n              Osoite: {event.product.place}, {event.product.streetAddress}\r\n            </Typography>\r\n            <Typography component=\"div\" sx={{color: '#efefef'}}>\r\n              Järjestäjä: {event.company.name}\r\n            </Typography>\r\n          </CardContent>\r\n          <CardContent sx={{textAlign: 'left', display: 'flex', flexDirection: 'column', gap: '.5rem', padding: 3}}>\r\n            <Typography gutterBottom variant=\"h2\" sx={{color: '#efefef', textAlign: 'center'}}>\r\n                LIPPUTYYPIT\r\n            </Typography>\r\n            <Divider sx={{border: '2px solid #2a0062', width: '100%', alignSelf: 'center'}}/>\r\n            {event.product.timeUntilSalesStart === 0 ?\r\n                event.variants.map(event => (\r\n                    <Card key={event.id} sx={{ width: '100%', maxHeight: 100, margin: 'auto', marginTop: '10px', textAlign: 'left', background: '#262828', padding: 1}} >\r\n                        <Typography gutterBottom variant=\"h7\" component=\"div\" sx={{textAlign: 'left', whiteSpace: \"normal\", margin: '7px 7px 7px 7px', fontWeight: 500, color: 'white'}}>\r\n                            {event.name}\r\n                        </Typography>\r\n                        <Box sx={{textAlign: 'left', whiteSpace: \"normal\", margin: '7px 7px 7px 7px'}}>\r\n                          {event.availability !== 0 ?\r\n                            <Chip sx={{margin: '0px 7px 0px 0px'}} label={`${event.availability} %`} color=\"success\" variant=\"outlined\" size='small'/>\r\n                            :\r\n                            <Chip sx={{margin: '0px 7px 0px 0px'}} label={`${event.availability} %`} color=\"error\" variant=\"outlined\" size='small'/>\r\n                          }\r\n                            \r\n                            <Chip label={`${(event.pricePerItem) / 100} €`} color='warning' variant=\"outlined\" size='small' />\r\n                        </Box>\r\n                    </Card>\r\n                ))\r\n                :\r\n                <Card sx={{ maxWidth: 380, maxHeight: 100, margin: 'auto', marginTop: '10px', textAlign: 'left', background: '#262828', padding: 2}}>\r\n                    <Typography gutterBottom variant=\"h7\" component=\"div\" sx={{textAlign: 'left', whiteSpace: \"normal\", margin: '7px 7px 7px 7px', fontWeight: 500, color: '#efefef'}}>\r\n                        Myynti alkaa {timeUntilSales(event.product.timeUntilSalesStart)} kuluttua.\r\n                    </Typography>\r\n                </Card>\r\n            }\r\n          </CardContent>\r\n        <CardActions sx={{textAlign: 'left', display: 'flex', flexDirection: 'column', gap: '.5rem', padding: 2}}>\r\n          <Button size=\"small\" sx={{color:'white', marginTop:'10px'}} endIcon={<ArrowForwardIcon />} href={`https://kide.app/events/${event.product.id}`}>\r\n            TAPAHTUMAN SIVULLE\r\n          </Button>\r\n        </CardActions>\r\n      </Card>\r\n  );\r\n}\r\n\r\nexport default EventInfo","import './App.css';\r\nimport { useState, useEffect } from 'react'\r\nimport Navbar from './components/Navbar';\r\nimport CityMenu from './components/CityMenu';\r\nimport EventMenu from './components/EventMenu';\r\nimport TokenInput from './components/TokenInput';\r\nimport fetch from './services/fetch';\r\nimport BuyButton from './components/BuyButton';\r\nimport Card from '@mui/material/Card';\r\nimport LoginForm from './components/LoginForm';\r\nimport Notification from './components/Notification';\r\nimport EventInfo from './components/EventInfo';\r\nimport { ThemeProvider, createTheme } from '@mui/material';\r\n\r\n\r\nconst App = () => {\r\n\r\n  const [city, setCity] = useState('')\r\n  const [event, setEvent] = useState('')\r\n  const [token, setToken] = useState('')\r\n  const [eventInfo, setEventInfo] = useState(null)\r\n  const [events, setEvents] = useState([])\r\n  const [message, setMessage] = useState(null)\r\n  const [error, setError] = useState(null)\r\n  const [user, setUser] = useState(null)\r\n  const [openErrorNotification, setOpenErrorNotification] = useState(false)\r\n  const [openMessageNotification, setOpenMessageNotification] = useState(false)\r\n  const [extraId, setExtraId] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedStonkuser');\r\n    if (loggedUserJSON) {\r\n      const user = JSON.parse(loggedUserJSON);\r\n      setUser(user);\r\n      fetch.setToken(user.token);\r\n    }\r\n    setToken(localStorage.getItem('kideToken'));\r\n\r\n    const initializeExtraId = async () => {\r\n      const fetchedExtraId = await fetch.fetchExtraId();\r\n      setExtraId(fetchedExtraId || 'd4adee2f5a49440e835ced5330470a69');\r\n    };\r\n    initializeExtraId();\r\n  }, []);\r\n\r\n\r\n  if (user === null){\r\n    return (\r\n      <LoginForm \r\n        setMessage={setMessage} \r\n        setError={setError} \r\n        setOpenMessageNotification={setOpenMessageNotification} \r\n        setOpenErrorNotification={setOpenErrorNotification}\r\n        setUser={setUser}\r\n      />\r\n    )\r\n  }\r\n\r\n  const theme = createTheme({\r\n    typography: {\r\n      allVariants: {\r\n        fontFamily: 'Roboto Mono',\r\n        textTransform: 'none',\r\n        fontSize: 16,\r\n        \r\n      },\r\n      h5: {\r\n        color: 'white'\r\n      },\r\n    },\r\n    root: {\r\n      \"&. MuiFormLabel-root\": {\r\n        color: \"white\"\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <div className=\"App\">\r\n        <Notification message={message} \r\n                      error={error} \r\n                      openErrorNotification={openErrorNotification} \r\n                      setOpenErrorNotification={setOpenErrorNotification} \r\n                      openMessageNotification={openMessageNotification} \r\n                      setOpenMessageNotification={setOpenMessageNotification} \r\n        />\r\n        <Navbar setMessage={setMessage} \r\n                setError={setError} \r\n                setUser={setUser}\r\n                setOpenMessageNotification={setOpenMessageNotification} \r\n                setOpenErrorNotification={setOpenErrorNotification}\r\n                user={user}\r\n        />\r\n        <Card sx={{ width: 400, minHeight: 400, margin: 'auto', boxShadow: 'rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px', background: '#262828', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center'}}>\r\n              <CityMenu setCity={setCity} \r\n                        city={city} \r\n                        setEvents={setEvents}\r\n              />\r\n              <EventMenu setEvent={setEvent} \r\n                        events={events} \r\n                        event={event} \r\n                        setEventInfo={setEventInfo}\r\n              />\r\n              <TokenInput token={token} setToken={setToken}/>\r\n              <BuyButton event={eventInfo} \r\n                        setMessage={setMessage} \r\n                        setError={setError} \r\n                        setOpenMessageNotification={setOpenMessageNotification} \r\n                        setOpenErrorNotification={setOpenErrorNotification}\r\n                        token={token}\r\n                        setEventInfo={setEventInfo}\r\n                        extraId={extraId}\r\n              />\r\n        </Card>\r\n        {eventInfo  === null ? \r\n            <></>\r\n            :\r\n            <EventInfo event={eventInfo}/>\r\n        }\r\n      </div>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n"],"sourceRoot":""}